<div class="layoutMain">
  <!-- src/app/components/navbar/navbar.component.html -->
<nav class="navbar">
  <div class="navbar-container">
    <div class="app-name">
      <img
        src="assets/images/localbasketlogo.png"
        width="30"
        height="30"
        alt="logo"
        style="border-radius: 15%"
      />
      Local Basket
    </div>

    <div
      class="restaurant-info btn btn-light d-flex align-items-center shadow-sm"
      (click)="toggleDropdown()"
    >
      <mat-icon
        class="me-3 cursor-pointer"
        (click)="openNotifications(); $event.stopPropagation()"
      >
        notifications
      </mat-icon>

      <div class="profile-section d-flex align-items-center">
        <mat-icon class="me-2 text-primary">person_pin_circle</mat-icon>
        <span class="restaurant-name fw-medium me-1">{{ restaurantName }}</span>
        <span
          class="status-dot me-2"
          [ngClass]="{ online: isOnline }"
        ></span>
        <mat-icon class="arrow-icon">
          {{ isDropdownOpen ? 'keyboard_arrow_up' : 'keyboard_arrow_down' }}
        </mat-icon>
      </div>

      <!-- Dropdown -->
      <div
        class="dropdown-menus"
        *ngIf="isDropdownOpen"
        (click)="$event.stopPropagation()"
      >
        <div class="dropdown-item">
          <mat-slide-toggle
            [(ngModel)]="isOnline"
            (change)="toggleOnline($event.checked)"
            [disabled]="loading"
          >
            <span class="toggle-label">
              {{ isOnline ? 'Online' : 'Offline' }}
              <ng-container *ngIf="loading">
                <mat-progress-spinner
                  diameter="16"
                  mode="indeterminate"
                  color="primary"
                  style="margin-left: 6px"
                ></mat-progress-spinner>
              </ng-container>
            </span>
          </mat-slide-toggle>
        </div>
        <a class="settings"><mat-icon>settings</mat-icon>Settings</a>
      </div>
    </div>
  </div>
</nav>


  <div class="layout-container" [ngClass]="{'panel-open': isPanelOpen}">
    <div class="card">
      <div class="sideNav-header d-flex justify-content-start p-1 m-3 gap-3 align-items-center">
        <div class="restaurant-logo">
          <mat-icon class="restaurantIcon">restaurant</mat-icon>
        </div>
        <div class="restaurantName">
          <p>{{ restaurantName }}</p>
        </div>
      </div>
      <ul class="list">
        <li class="element" routerLink="/layoutHome/layout/delivery" routerLinkActive="active">
          <mat-icon>restaurant_menu</mat-icon>
          <p class="label">Online Orders</p>
        </li>
        <li class="element" routerLink="/menuManagement/menuManagement" routerLinkActive="active">
          <mat-icon>restaurant_menu</mat-icon>
          <p class="label">Menu Items</p>
        </li>
        <li class="element" routerLink="/menuManagement/itemAvailability" routerLinkActive="active">
          <mat-icon>restaurant</mat-icon>
          <p class="label">Menu Status</p>
        </li>
        <li class="element" (click)="toggleReportsSubMenu()">
          <mat-icon>report</mat-icon>
          <p class="label">Reports</p>
          <mat-icon class="arrow-icon">{{ isReportsSubMenuOpen ? 'keyboard_arrow_up' : 'keyboard_arrow_down'
            }}</mat-icon>
        </li>
        <ul class="sub-list" *ngIf="isReportsSubMenuOpen">
          <li class="element sub-element" routerLink="/menuManagement/reports" routerLinkActive="active">
            <p class="label">Order Reports</p>
          </li>
          <li class="element sub-element" routerLink="/menuManagement/product-reports" routerLinkActive="active">
            <p class="label">Product Reports</p>
          </li>
        </ul>
        <li class="element" (click)="logOut()">
          <mat-icon>exit_to_app</mat-icon>
          <p class="label">LogOut</p>
        </li>
      </ul>
    </div>
    <div class="main-content">
      <router-outlet></router-outlet>
      <app-notifications #notificationPanel (panelToggled)="onPanelToggled($event)" [isOpen]="isPanelOpen"
        (closePanel)="closePanel()"></app-notifications>
    </div>
  </div>
</div>

